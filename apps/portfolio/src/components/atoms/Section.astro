---
/**
 * Section component.
 * A layout component that creates a new section on the page. It can optionally
 * display a title with a "numbered heading" style, which uses a CSS counter
 * for automatic numbering.
 *
 * @prop {string} [title] - The title of the section. If provided, it will be displayed as a numbered heading.
 * @prop {string} [class] - Additional CSS classes to apply to the `<section>` element.
 */
import type { HTMLAttributes } from "astro/types";
import { cn } from "@/lib/utils";
import Typography from "./Typography.astro";

interface Props extends HTMLAttributes<"section"> {
	title?: string;
}

const { title, class: className, ...rest } = Astro.props;
// add `snap-start` so sections align with scroll-snap containers by default
// Use simple fade-in animation that will be triggered by CSS classes
const classes = cn(
	"max-w-6xl mx-auto mb-24 snap-start animate-fade-in-up animate-duration-slower",
	className,
);
---

<section class={classes} {...rest}>
	{title && (
		<Typography 
			as="h2" 
			variant="subtitle" 
			class="numbered-heading flex items-center relative my-2.5 mb-10 w-full font-bold whitespace-nowrap"
		>
			{title}
		</Typography>
	)}
	<slot />
</section>

<style>
	.numbered-heading {
		font-size: clamp(1.625rem, 5vw, 2rem); /* 26px to 32px responsive */
	}

	.numbered-heading::before {
		position: relative;
		counter-increment: section;
		content: '0' counter(section) '.';
		margin-right: 10px;
		color: var(--color-primary);
		font-family: var(--font-sans);
		font-size: clamp(1rem, 3vw, 1.25rem); /* 16px to 20px responsive */
		font-weight: 400;
	}

	.numbered-heading::after {
		content: '';
		flex: 1;
		height: 1px;
		margin-left: 20px;
		background-color: var(--color-brand-navy-lighter);
		max-width: 300px;
	}

	/* Responsive adjustments */
	@media (max-width: 480px) {
		.numbered-heading::before {
			margin-right: 5px;
		}
	}

	@media (max-width: 1080px) {
		.numbered-heading::after {
			max-width: 200px;
		}
	}

	@media (max-width: 768px) {
		.numbered-heading::after {
			max-width: none;
		}
	}

	@media (max-width: 600px) {
		.numbered-heading::after {
			margin-left: 10px;
		}
	}
</style>
