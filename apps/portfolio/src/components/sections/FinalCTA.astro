---
/**
 * Final CTA (Call-to-Action) section component.
 * This component displays a prominent call-to-action encouraging visitors
 * to connect for senior roles, consulting projects, or system audits.
 * 
 * Features:
 * - Clear messaging about availability
 * - LinkedIn and scheduling links
 * - Accessible design with proper focus states
 * - Responsive layout
 * 
 * @prop {Profile[]} profiles - Array of social profiles to find LinkedIn
 */
import Link from "@/components/atoms/Link.astro";
import Typography from "@/components/atoms/Typography.astro";
import type { Profile } from "@/core/resume";
import { type Lang, useTranslations } from "@/i18n";
import { CALENDLY_URL } from "@/configs/site.consts";

interface Props {
	profiles: Profile[];
}

const { profiles } = Astro.props;
const currentLocale = Astro.params.lang as Lang;
const t = useTranslations(currentLocale);

// Find LinkedIn profile
const linkedInProfile = profiles.find(({ network }) => network === "LinkedIn");
const linkedInUrl = linkedInProfile?.url || "https://www.linkedin.com/in/yacosta738/";

// Get Calendly URL from config
const calendlyUrl = CALENDLY_URL;
---

<section class="max-w-6xl mx-auto mb-24 px-4">
	<div
		class="relative overflow-hidden rounded-2xl bg-gradient-to-br from-brand-accent/10 via-background-secondary to-brand-accent/5 border border-brand-accent/20 p-8 md:p-12 lg:p-16"
	>
		<!-- Background decoration -->
		<div
			class="absolute inset-0 bg-grid-pattern opacity-5"
			aria-hidden="true"
		></div>

		<div class="relative z-10 text-center max-w-3xl mx-auto">
			<!-- Title -->
			<Typography
				as="h2"
				variant="subtitle"
				class="text-3xl md:text-4xl lg:text-5xl font-bold text-foreground mb-6"
			>
				{t("cta.title")}
			</Typography>

			<!-- Message -->
			<Typography
				as="p"
				variant="body"
				class="text-lg md:text-xl text-foreground-muted mb-10 leading-relaxed"
			>
				{t("cta.message")}
			</Typography>

			<!-- CTA Buttons -->
			<div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
				<Link
					href={linkedInUrl}
					class="inline-flex items-center gap-2 px-8 py-4 bg-brand-accent text-background font-display text-lg font-medium rounded-lg hover:bg-opacity-90 transition-all duration-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-accent focus-visible:ring-offset-2 shadow-lg hover:shadow-xl"
					target="_blank"
					rel="noopener noreferrer"
					aria-label={t("cta.linkedin")}
				>
					<svg
						class="w-5 h-5"
						fill="currentColor"
						viewBox="0 0 24 24"
						aria-hidden="true"
					>
						<path
							d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"
						></path>
					</svg>
					{t("cta.linkedin")}
				</Link>

				<Link
					href={calendlyUrl}
					class="inline-flex items-center gap-2 px-8 py-4 border-2 border-brand-accent text-brand-accent bg-background font-display text-lg font-medium rounded-lg hover:bg-brand-accent hover:text-background hover:bg-opacity-10 transition-all duration-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-accent focus-visible:ring-offset-2"
					target="_blank"
					rel="noopener noreferrer"
					aria-label={t("cta.schedule")}
				>
					<svg
						class="w-5 h-5"
						fill="none"
						stroke="currentColor"
						viewBox="0 0 24 24"
						aria-hidden="true"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
						></path>
					</svg>
					{t("cta.schedule")}
				</Link>
			</div>
		</div>
	</div>
</section>

<style>
	.bg-grid-pattern {
		background-image: linear-gradient(
				to right,
				rgba(255, 255, 255, 0.1) 1px,
				transparent 1px
			),
			linear-gradient(
				to bottom,
				rgba(255, 255, 255, 0.1) 1px,
				transparent 1px
			);
		background-size: 20px 20px;
	}

	@media (prefers-reduced-motion: reduce) {
		.inline-flex:hover {
			transform: none;
		}
	}
</style>
