---
import { t, setDefaultNamespace } from 'i18next'
import { localizeUrl } from '@utils:utilities'
import type { Article } from '@models:Article'
import { urlize } from '@utils:utilities'
import { Icon } from 'astro-icon'

export interface Props {
	article: Article
}
const { article } = Astro.props

const formatDate = (date: Date | string) => {
	if (typeof date === 'string') {
		date = new Date(date)
	}
	return date.toLocaleDateString()
}
setDefaultNamespace('blog')
---

<ul
	class='relative mb-4 flex list-none flex-col items-center p-0 font-mono text-sm text-light-slate md:flex-row'
>
	{
		article.date && (
			<li class='mx-1 my-2 flex items-center whitespace-nowrap'>
				<Icon name='mdi:calendar-month-outline' class='h-4' />
				<span class='mx-2'>{formatDate(article.date)}</span>
			</li>
		)
	}
	{
		article.timeToRead && (
			<li class='mx-1 my-2 whitespace-nowrap'>
				<span>{t('time-to-read', { timeToRead: article.timeToRead })}</span>
			</li>
		)
	}
	{
		article.author && (
			<li class='mx-1 my-2 whitespace-nowrap'>
				<span class='mr-1'>{t('author')}</span>
				<a href={localizeUrl(`/blog/authors/${urlize(article.author)}`)} class='inline-link'>
					{article.author}
				</a>
			</li>
		)
	}
</ul>
